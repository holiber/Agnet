# STCAPI — Draft Specification (Tier 1 / MVP)

**STC** — отсылка к *Standard Template Component* из Warhammer.

---

## 1. Цель проекта

STCAPI — это **spec-first стандарт** для разработки программных систем, ориентированный на совместную работу **AI-агентов и человека**, где совместимость, интеграция и эволюция компонентов являются первичными, а конкретные реализации — вторичными.

Проект в первую очередь нацелен на проекты на **TypeScript / JavaScript**.

Основной упор делается на:
- vendor-agnostic протоколы и контракты;
- понятность как для человека, так и для AI-агентов;
- возможность независимой разработки и последующей интеграции модулей.

---

## 2. Tier 1 — Scope и цели

### 2.1 Primary User (Tier 1)

**Основной пользователь Tier 1 — AI-агенты**, которые:
- пишут код;
- управляют процессом разработки;
- создают и интегрируют модули;
- работают через GitHub и другие tooling-интерфейсы.

Человек выступает как:
- архитектор;
- наблюдатель;
- корректор;
- финальный арбитр решений.

---

### 2.2 Tier 1 Goals

Tier 1 должен:

- покрывать ~**80% задач прототипирования** на TS/JS;
- позволять быстро собирать приложение из модулей;
- описывать публичное API с типами и документацией;
- вызывать компоненты локально и удалённо единообразно;
- поддерживать streaming / progress для длительных операций;
- позволять интегрировать модули без массивного переписывания;
- включать разработку **нескольких базовых политик**, используемых самим STCAPI.

---

### 2.3 Tier 1 Success Scenario

1. Два AI-агента независимо разрабатывают два модуля (две epic-задачи).
2. Модули создаются изолированно, но по одной спецификации.
3. Третьему AI-агенту поручается задача интеграции.
4. Интеграция происходит без переписывания контрактов и архитектуры.

---

### 2.4 Tier 1 Non-goals

Tier 1 **не является**:
- production-ready платформой;
- распределённой системой с сильной консистентностью;
- системой безопасности, авторизации или биллинга;
- командным workflow-инструментом;
- UI-фреймворком.

Фокус Tier 1 — **быстрое прототипирование и обкатка спецификации**.

---

## 3. Принципы спецификации

- STCAPI — прежде всего **спецификация**, а не runtime.
- Reference tooling используется для валидации спецификации на практике.
- Любой может реализовать собственные STC-compatible компоненты.
- Спецификация описывается в `.d.ts` файлах с комментариями TSDoc.
- Спецификация расширяема и может содержать `proposal`-части.

---

## 4. Core Components (обзор)

- appEngine
- module
- collection
- channel
- api / apiClient
- transport
- chat
- policy
- docs

---

## 5. Collection (STCCollection)

### 5.1 Назначение

`STCCollection` — базовая абстракция хранения данных, используемая всеми компонентами системы  
(Chat, Policy registry, API schema, request tracking и др.).

---

### 5.2 Типы коллекций

Поддерживаемые типы:

- **flat** — независимые записи без связей;
- **tree** — иерархические записи со связью через `parentId`.

Типы **ugraph** и **mgraph** вынесены в `proposal` и **не реализуются в Tier 1**.

---

### 5.3 Модель данных (Tier 1)

- Запись коллекции:
  ```ts
  Record<string, unknown>
